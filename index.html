<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Iteration: Nightmare</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700;900&family=Noto+Sans+TC:wght@300;400;700&display=swap');
      
      body {
        font-family: 'Noto Sans TC', sans-serif;
        background-color: #050505;
        color: #ddd;
        overflow: hidden;
        user-select: none;
      }
      
      .serif-font {
        font-family: 'Noto Serif TC', serif;
      }

      /* CRT / Film Grain Effects */
      .scanlines {
        background: linear-gradient(
          to bottom,
          rgba(255,255,255,0),
          rgba(255,255,255,0) 50%,
          rgba(0,0,0,0.05) 50%,
          rgba(0,0,0,0.05)
        );
        background-size: 100% 4px;
        position: fixed;
        pointer-events: none;
        top: 0; right: 0; bottom: 0; left: 0;
        z-index: 50;
      }

      .vignette {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        box-shadow: 0 0 100px rgba(0,0,0,0.6) inset;
        pointer-events: none;
        z-index: 40;
      }

      .noise {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        pointer-events: none;
        z-index: 45;
        opacity: 0.03;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      }

      /* Animations */
      @keyframes shake {
        0% { transform: translate(1px, 1px) rotate(0deg); }
        10% { transform: translate(-1px, -2px) rotate(-1deg); }
        20% { transform: translate(-3px, 0px) rotate(1deg); }
        30% { transform: translate(3px, 2px) rotate(0deg); }
        40% { transform: translate(1px, -1px) rotate(1deg); }
        50% { transform: translate(-1px, 2px) rotate(-1deg); }
        60% { transform: translate(-3px, 1px) rotate(0deg); }
        70% { transform: translate(3px, 1px) rotate(-1deg); }
        80% { transform: translate(-1px, -1px) rotate(1deg); }
        90% { transform: translate(1px, 2px) rotate(0deg); }
        100% { transform: translate(1px, -2px) rotate(-1deg); }
      }

      .shake-anim { animation: shake 0.5s infinite; }

      @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }
      .animate-float { animation: float 4s ease-in-out infinite; }

      @keyframes flicker {
        0%, 19.999%, 22%, 62.999%, 64%, 64.999%, 70%, 100% { opacity: 0.99; }
        20%, 21.999%, 63%, 63.999%, 65%, 69.999% { opacity: 0.4; }
      }
      .animate-flicker { animation: flicker 3s infinite; }

      @keyframes fog {
        0% { transform: translate3d(-200vw, 0, 0); }
        100% { transform: translate3d(200vw, 0, 0); }
      }

        /* Improved Walk Cycle */
        @keyframes leg-l {
          0% { transform: rotate(20deg) translateY(0px); }
          50% { transform: rotate(-10deg) translateY(-2px); }
          100% { transform: rotate(20deg) translateY(0px); }
        }
        @keyframes leg-r {
          0% { transform: rotate(-10deg) translateY(-2px); }
          50% { transform: rotate(20deg) translateY(0px); }
          100% { transform: rotate(-10deg) translateY(-2px); }
        }
        @keyframes walk-bob {
            0% { transform: translateY(0); }
            25% { transform: translateY(-3px); }
            50% { transform: translateY(0); }
            75% { transform: translateY(-3px); }
            100% { transform: translateY(0); }
        }
        @keyframes bob-head {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(1px); }
        }
        @keyframes arm-sway {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(-15deg); }
        }
        /* New Arm Swing for Walking */
        @keyframes arm-swing-l {
            0% { transform: rotate(-25deg); }
            50% { transform: rotate(15deg); }
            100% { transform: rotate(-25deg); }
        }
        @keyframes arm-swing-r {
            0% { transform: rotate(15deg); }
            50% { transform: rotate(-25deg); }
            100% { transform: rotate(15deg); }
        }

        @keyframes sway-subtle {
            0%, 100% { transform: skewX(1deg); }
            50% { transform: skewX(-1deg); }
        }
        @keyframes sway-slow {
            0%, 100% { transform: rotate(5deg); }
            50% { transform: rotate(2deg); }
        }
        @keyframes sway-slow-reverse {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(-2deg); }
        }
        @keyframes lantern-swing-idle {
            0%, 100% { transform: rotate(3deg); }
            50% { transform: rotate(-3deg); }
        }
        @keyframes lantern-swing-move {
            0% { transform: rotate(10deg); }
            50% { transform: rotate(-10deg); }
            100% { transform: rotate(10deg); }
        }
        @keyframes float-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        @keyframes pulse-slow {
            0%, 100% { opacity: 0.1; }
            50% { opacity: 0.3; }
        }
        @keyframes pulse-ring {
            0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.5; }
            100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
        }
        @keyframes spin-super-slow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes dangle {
            0%, 100% { transform: rotate(12deg) skewX(12deg); }
            50% { transform: rotate(5deg) skewX(10deg); }
        }
        @keyframes ribbon-flow {
            0% { transform: rotate(10deg) translateY(0); }
            50% { transform: rotate(14deg) translateY(5px); }
            100% { transform: rotate(10deg) translateY(0); }
        }
        @keyframes ribbon-flow-reverse {
            0% { transform: rotate(-10deg) translateY(0); }
            50% { transform: rotate(-14deg) translateY(5px); }
            100% { transform: rotate(-10deg) translateY(0); }
        }
        @keyframes shadow-flicker {
            0%, 100% { transform: skewX(0deg) scale(1); opacity: 0.8; }
            33% { transform: skewX(2deg) scale(1.02); opacity: 0.7; }
            66% { transform: skewX(-1deg) scale(0.98); opacity: 0.85; }
        }
        @keyframes flicker-subtle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.85; }
            25%, 75% { opacity: 0.95; }
        }
        @keyframes fog-scroll {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 0%; }
        }
        @keyframes ghost-flicker {
            0%, 100% { opacity: 0; }
            50% { opacity: 0.05; }
            60% { opacity: 0.3; }
            70% { opacity: 0; }
            80% { opacity: 0.1; }
        }
        @keyframes drunken-idle {
            0%, 100% { transform: rotate(1deg); }
            50% { transform: rotate(-1deg); }
        }
        @keyframes swing {
            0%, 100% { transform: rotate(1deg); }
            50% { transform: rotate(-1deg); }
        }

        .animate-leg-l { animation: leg-l 0.6s infinite linear; }
        .animate-leg-r { animation: leg-r 0.6s infinite linear; }
        .animate-bob { animation: bob 0.6s infinite ease-in-out; }
        .animate-bob-head { animation: bob-head 0.6s infinite ease-in-out; }
        .animate-arm-sway { animation: arm-sway 0.6s infinite ease-in-out; }
        .animate-arm-swing-l { animation: arm-swing-l 0.6s infinite ease-in-out; }
        .animate-arm-swing-r { animation: arm-swing-r 0.6s infinite ease-in-out; }
        
        .animate-walk-bob { animation: walk-bob 0.6s infinite linear; }
        
        .animate-sway { animation: sway 3s infinite ease-in-out; }
        .animate-sway-subtle { animation: sway-subtle 4s infinite ease-in-out; }
        .animate-sway-slow { animation: sway-slow 5s infinite ease-in-out; }
        .animate-sway-slow-reverse { animation: sway-slow-reverse 6s infinite ease-in-out; }
        .animate-lantern-swing-idle { animation: lantern-swing-idle 4s infinite ease-in-out; }
        .animate-lantern-swing-move { animation: lantern-swing-move 1s infinite ease-in-out; }
        .animate-float-slow { animation: float-slow 4s infinite ease-in-out; }
        .animate-pulse-slow { animation: pulse-slow 4s infinite ease-in-out; }
        .animate-spin-super-slow { animation: spin-super-slow 30s linear infinite; }
        .animate-dangle { animation: dangle 3s infinite ease-in-out; }
        .animate-ribbon-flow { animation: ribbon-flow 6s infinite ease-in-out; }
        .animate-ribbon-flow-reverse { animation: ribbon-flow-reverse 6s infinite ease-in-out; }
        .animate-pulse-ring { animation: pulse-ring 2s infinite cubic-bezier(0, 0, 0.2, 1); }
        .animate-shadow-flicker { animation: shadow-flicker 4s infinite linear; }
        .animate-flicker-subtle { animation: flicker-subtle 2s infinite steps(10); }
        .animate-fog-scroll { animation: fog-scroll 60s linear infinite; }
        .animate-ghost-flicker { animation: ghost-flicker 5s infinite steps(20); }
        .animate-drunken-idle { animation: drunken-idle 4s infinite ease-in-out; }
        .animate-swing { animation: swing 5s infinite ease-in-out; }
    </style>
<script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.1/",
    "react": "https://esm.sh/react@^19.2.1",
    "lucide-react": "https://esm.sh/lucide-react@^0.559.0",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2",
    "react-dom/": "https://esm.sh/react-dom@^19.2.1/",
    "vite": "https://esm.sh/vite@^7.2.7"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>